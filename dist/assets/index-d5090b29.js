(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function w(){const r=document.querySelector(".game__field"),t=document.createElement("button");return t.classList.add("btn-start","active"),t.textContent="start-game",t.addEventListener("click",()=>{setTimeout(()=>{t.classList.remove("active"),setTimeout(()=>{t.remove()},300)},500)}),r.appendChild(t),t}function x(r){const t=document.querySelector(".game__field"),e=document.createElement("button"),s=document.createElement("div");return e.classList.add("btn-end","active"),e.textContent="start-again",s.classList.add("banner-end","active"),s.textContent=r?"WELL DONE!":"GAME OVER!",e.addEventListener("click",()=>{setTimeout(()=>{e.classList.remove("active"),s.classList.remove("active"),setTimeout(()=>{e.remove(),s.remove()},300)},500)}),t.appendChild(s),t.appendChild(e),e}function v(r,t){if(t){const e=document.querySelector(".canvas");let s=0,i=0;e.addEventListener("touchstart",o=>{o.preventDefault(),s=o.touches[0].clientX,i=o.touches[0].clientY}),e.addEventListener("touchmove",o=>{if(o.preventDefault(),!s||!i)return;const a=o.touches[0].clientX,c=o.touches[0].clientY,h=s-a,d=i-c;Math.abs(h)>Math.abs(d)?h>0?r.dir!=="right"&&r.changeDirection("left"):r.dir!=="left"&&r.changeDirection("right"):d>0?r.dir!=="bot"&&r.changeDirection("top"):r.dir!=="top"&&r.changeDirection("bot")})}else{const e=document.querySelector(".arrows__arrow_top"),s=document.querySelector(".arrows__arrow_left"),i=document.querySelector(".arrows__arrow_bot"),o=document.querySelector(".arrows__arrow_right");e.addEventListener("click",()=>{r.dir!=="bot"&&r.changeDirection("top")}),i.addEventListener("click",()=>{r.dir!=="top"&&r.changeDirection("bot")}),s.addEventListener("click",()=>{r.dir!=="right"&&r.changeDirection("left")}),o.addEventListener("click",()=>{r.dir!=="left"&&r.changeDirection("right")}),document.addEventListener("keydown",a=>{switch(a.key){case"ArrowUp":a.preventDefault(),r.dir!=="bot"&&r.changeDirection("top");break;case"ArrowDown":a.preventDefault(),r.dir!=="top"&&r.changeDirection("bot");break;case"ArrowLeft":a.preventDefault(),r.dir!=="right"&&r.changeDirection("left");break;case"ArrowRight":a.preventDefault(),r.dir!=="left"&&r.changeDirection("right");break}})}}const L="/assets/food-8a8dec3d.svg";function b(r){const t=[],e=document.querySelector(".food__inner");for(let s=0;s<r;s++){const i=document.createElement("img");i.classList.add("food__img"),i.src=L,i.alt="food",e.appendChild(i),t.push(i)}return t}function _(r){r.forEach(t=>{t.classList.remove("eaten")})}const D="/assets/up-arrow-127e081c.svg",E="/assets/left-arrow-8a132e58.svg",S="/assets/bot-arrow-c06e25aa.svg",C="/assets/right-arrow-6b397d69.svg";function P(r){const t=document.querySelector(".arrows"),e=document.createElement("div");if(e.classList.add("arrows__text","text"),e.innerHTML=r?"// use swipe to play":`
					// use keyboard <br>
					// arrows to play
			  	  `,t.appendChild(e),!r){const s=document.createElement("div");s.classList.add("arrows__inner"),s.innerHTML=`
			<img src="${D}" alt="arrow" class="arrows__arrow arrows__arrow_top">
			<img src="${E}" alt="arrow" class="arrows__arrow arrows__arrow_left">
			<img src="${S}" alt="arrow" class="arrows__arrow arrows__arrow_bot">
			<img src="${C}" alt="arrow" class="arrows__arrow arrows__arrow_right">
		`,t.appendChild(s)}}function A(){return window.matchMedia("(max-width: 992px)").matches}function y(r,t,e,s){return Math.sqrt(Math.pow(r-e,2)+Math.pow(t-s,2))}class M{constructor(t,e,s,i,o){this.ctx=s,this.canvasWidth=i,this.canvasHeight=o,this.speed=1,this.dir="top",this.x=t,this.y=e,this.vx=0,this.vy=-this.speed,this.radius=6,this.tailLength=150,this.tailIncrease=20,this.points=[{x:this.x,y:this.y,alpha:1},{x:this.x,y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength*2/3>>0),alpha:0}],this.calcAlpha(!0)}reset(t,e){this.x=t,this.y=e,this.tailLength=150,this.dir="top",this.vx=0,this.vy=-this.speed,this.points=[{x:this.x,y:this.y,alpha:1},{x:this.x,y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength*2/3>>0),alpha:0}],this.calcAlpha(!0)}increazeSize(){switch(this.tailLength+=this.tailIncrease,this.dir){case"top":this.x=this.x,this.y=this.y-this.tailIncrease;break;case"bot":this.x=this.x,this.y=this.y+this.tailIncrease;break;case"left":this.x=this.x-this.tailIncrease,this.y=this.y;break;case"right":this.x=this.x+this.tailIncrease,this.y=this.y;break}}calcAlpha(t){for(let e=1;e<this.points.length;e++){const s=this.points[e-1],i=this.points[e],o=y(s.x,s.y,i.x,i.y);if(i.alpha=s.alpha-o/this.tailLength,!t){const a=this.ctx.createLinearGradient(s.x,s.y,i.x,i.y);a.addColorStop(0,`rgba(67, 217, 173, ${s.alpha})`),a.addColorStop(1,`rgba(67, 217, 173, ${i.alpha})`),this.ctx.strokeStyle=a,this.ctx.lineTo(i.x,i.y),this.ctx.stroke()}}}addPoint(){this.points.unshift({x:this.x,y:this.y,alpha:1})}isCollisedWithFood(t,e,s){return y(this.x,this.y,t,e)<=this.radius+s}isCoillisedWithBorder(){if(this.x<=this.radius||this.x>=this.canvasWidth-this.radius||this.y<=this.radius||this.y>=this.canvasHeight-this.radius)return!0}isCollisedWithItself(){for(let t=1;t<this.points.length;t++){const e=this.points[t-1],s=this.points[t],i=Math.max(e.x,s.x),o=Math.min(e.x,s.x),a=Math.max(e.y,s.y),c=Math.min(e.y,s.y);if(i===o&&this.y<a&&this.y>c&&this.x===i||a===c&&this.x<i&&this.x>o&&this.y===a)return!0}}draw(){this.ctx.lineWidth=this.radius*2,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y),this.calcAlpha(!1)}changeDirection(t){switch(t){case"top":(this.dir==="left"||this.dir==="right")&&this.addPoint(),this.dir="top",this.vx=0,this.vy=-this.speed;break;case"bot":(this.dir==="left"||this.dir==="right")&&this.addPoint(),this.dir="bot",this.vx=0,this.vy=this.speed;break;case"left":(this.dir==="top"||this.dir==="bot")&&this.addPoint(),this.dir="left",this.vx=-this.speed,this.vy=0;break;case"right":(this.dir==="top"||this.dir==="bot")&&this.addPoint(),this.dir="right",this.vx=this.speed,this.vy=0;break}}move(){if(this.x+=this.vx,this.y+=this.vy,this.points[0].x=this.x,this.points[0].y=this.y,this.points.length>1){const t=this.points[this.points.length-1],e=this.points[this.points.length-2],s=e.x-t.x,i=e.y-t.y;s>0?t.x+=this.speed:s<0?t.x-=this.speed:s===0&&i===0&&this.points.pop(),i>0?t.y+=this.speed:i<0&&(t.y-=this.speed)}}}function g(r,t){return Math.random()*(t-r)+r>>0}class q{constructor(t,e,s,i,o){this.x=t,this.y=e,this.radius=6,this.ctx=s,this.canvasWidth=i,this.canvasHeight=o,this.spawnLimit=50}reset(t,e){this.x=t,this.y=e}setNewFood(){this.x=g(this.spawnLimit,this.canvasWidth-this.spawnLimit),this.y=g(this.spawnLimit,this.canvasHeight-this.spawnLimit)}draw(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius*3,0,Math.PI*2,!0),this.ctx.fillStyle="rgba(67, 217, 173, .1)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius*2,0,Math.PI*2,!0),this.ctx.fillStyle="rgba(67, 217, 173, .2)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,Math.PI*2,!0),this.ctx.fillStyle="rgb(67, 217, 173)",this.ctx.fill()}}document.addEventListener("DOMContentLoaded",()=>{const r=A();P(r);const t=document.querySelector(".canvas"),e=t.getContext("2d"),s=t.width,i=t.height,o={x:98,y:120},a={x:98,y:64},c=10;let h="start",d=0;const n=new M(o.x,o.y,e,s,i),l=new q(a.x,a.y,e,s,i),f=b(c);v(n,r);function u(){switch(h){case"start":const m=w();l.draw(),n.draw(),m.addEventListener("click",()=>{h="game",requestAnimationFrame(u)});break;case"end":x(!1).addEventListener("click",()=>{p(),requestAnimationFrame(u)});break;case"win":x(!0).addEventListener("click",()=>{p(),requestAnimationFrame(u)});break;case"game":e.clearRect(0,0,s,i),l.draw(),n.draw(),n.move(),n.isCollisedWithFood(l.x,l.y,l.radius)&&(f[d].classList.add("eaten"),d++,d===c?h="win":(l.setNewFood(),n.increazeSize())),(n.isCoillisedWithBorder()||n.isCollisedWithItself())&&(h="end"),requestAnimationFrame(u);break}function p(){h="game",n.reset(o.x,o.y),l.reset(a.x,a.y),d=0,_(f)}}requestAnimationFrame(u)});
